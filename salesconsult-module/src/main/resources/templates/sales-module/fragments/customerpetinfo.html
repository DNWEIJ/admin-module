<th:block th:fragment="customerPetInfo(customer, pet, backbutton)" xmlns:th="http://www.w3.org/1999/html">
    <div class="grid">
        <div>
            <th:block th:if="${backbutton}">
                <a href="/sales/otc/search" role="button" th:text="#{label.button.back}"></a>
            </th:block>
            <th:block th:if="${!backbutton}">
                <th:block th:replace="~{::customerInfo}"/>
            </th:block>
        </div>
        <div>
            <th:block th:if="${backbutton}">
                <th:block th:replace="~{::customerInfo}"/>
            </th:block>
            <th:block th:if="${!backbutton}">
                <th:block th:replace="~{::petInfo}"/>
            </th:block>
        </div>
        <div>
            <th:block th:if="${backbutton}">
                <th:block th:replace="~{::petInfo}"/>
            </th:block>

            <th:block th:if="${pet != null}">
                <div class="center">&nbsp;</div>
                <div class="center"
                     th:classappend="${pet.insured.label == 'label.yesno.yes'} ? ' red-text' : ''"
                     th:text="'I: ' + #{__${pet.insured.label}__}+ (${pet.insuredBy} != null ? ' (' + ${pet.insuredBy} + ')' : '')">
                </div>
                <div class="center"
                     th:classappend="${pet.allergies.label == 'label.yesno.yes'} ? ' red-text' : ''"
                     th:text="'A: '+ #{__${pet.allergies.label}__} + (${pet.allergiesDescription} != null ? ' (' + ${pet.allergiesDescription} + ')' : '')">
                </div>
                <div class="center"
                     th:classappend="${pet.gpwarning.label == 'label.yesno.yes'} ? ' red-text' : ''"
                     th:text="'D: '+ #{__${pet.gpwarning.label}__} + (${pet.gpwarningDescription} != null ? ' (' + ${pet.gpwarningDescription} + ')' : '')">
                </div>
                <div class="center" th:text="#{pet.chipped} + ': '+  ${pet.chipTattooId} + ' - '+${#temporals.format(pet.chipDate, 'dd-MM-yyyy')}"></div>
            </th:block>
        </div>
    </div>
</th:block>

<th:block th:fragment="customerInfo">
    <th:block th:if="${customer != null}">
        <h6 class="center" th:text="${customer.customerName} +' ('+ ${customer.id} + ' - '+ ${customer.status.databaseField} + ')'"></h6>
        <div class="center"
             th:text="${#strings.isEmpty(customer.email)} ? #{customer.email.no_email} : ${customer.email}"
             th:class="${#strings.isEmpty(customer.email)} ? 'red-text' : ''"></div>
        <div class="center" th:text="${customer.address2}+', '+ ${customer.address3}"></div>
        <div class="center" th:text="${customer.homePhone}+', '+ ${customer.workPhone}+', '+ ${customer.mobilePhone}"></div>
    </th:block>
</th:block>
<th:block th:fragment="petInfo">
    <th:block th:if="${pet != null}">
        <h6 class="center" th:utext="${pet.nameWithDeceasedAndDate} "></h6>
        <div class="center" th:text="#{__${pet.sex.label}__}"></div>
        <div class="center" th:text="${#temporals.format(pet.birthday, 'dd-MM-yyyy')} +' ('+ ${pet.age}+')'"></div>
        <div class="center" th:text="${pet.idealWeight != null} ? #{pet.idealWeight} + ': ' + ${pet.idealWeight} : #{pet.idealWeight} + ': '"></div>
        <div class="grid">
            <div>
                <a href="">History</a>
            </div>
            <div>
                <a href="">SOAP</a>
            </div>
            <div>
                <a href="">Add note</a>
            </div>
        </div>

    </th:block>
</th:block>